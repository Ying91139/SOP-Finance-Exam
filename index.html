<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOP Finance Exam - มนต์อุตสาหกรรมอาหาร</title>
    <!-- โหลด React และ Tailwind ผ่าน CDN เพื่อความง่าย -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Kanit', sans-serif !important; background-color: #f8fafc; }
        @media print { .no-print { display: none !important; } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        const Icons = {
            Timer: () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>),
            User: () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>),
            ClipboardCheck: () => (<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="m9 14 2 2 4-4"/></svg>),
            Send: () => (<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>),
            Printer: () => (<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect width="12" height="8" x="6" y="14"/></svg>),
            Award: () => (<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>),
            ChevronLeft: () => (<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6"/></svg>),
            ChevronRight: () => (<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>)
        };

        const MASTER_QUESTIONS = [
            { id: 1, q: "วงเงินสดย่อย (Petty Cash) ที่บริษัทกำหนดให้ถือไว้คงที่คือเท่าใด?", a: "20,000 บาท", options: ["10,000 บาท", "15,000 บาท", "20,000 บาท", "25,000 บาท"] },
            { id: 2, q: "สมการความสมดุลของเงินสดย่อยที่ถูกต้องคือข้อใด?", a: "เงินสด + ใบเสร็จ + ใบยืม (AV) = 20,000", options: ["เงินสด + รายงานการขาย = 20,000", "เงินสด + ใบเสร็จ + ใบยืม (AV) = 20,000", "เงินสด + สลิปโอนเงิน = 20,000", "ใบเสร็จ + ใบยืม = 20,000"] },
            { id: 3, q: "พนักงานทำใบเสร็จหายไป 500 บาท จากเงินยืม 3,000 บาท ต้องทำอย่างไร?", a: "พนักงานต้องคืนเงินสด 500 บาทชดเชยส่วนที่หาย", options: ["ให้บัญชีแก้ใบยืมเป็น 2,500", "พนักงานต้องคืนเงินสด 500 บาทชดเชยส่วนที่หาย", "ไม่ต้องคืนถ้ามีพยานยืนยัน", "เขียนใบรับรองแทนใบเสร็จเอง"] },
            { id: 4, q: "พบเงินเกินในเก๊ะขารับ 120 บาท ควรทำอย่างไร?", a: "บันทึกเป็น 'เงินเกิน' และรีเช็คบิลขายทุกใบ", options: ["เก็บไว้เป็นเงินส่วนตัว", "นำเข้าสดย่อยทันที", "บันทึกเป็น 'เงินเกิน' และรีเช็คบิลขายทุกใบ", "ทิ้งเงินนั้นไป"] },
            { id: 5, q: "ลูกค้าขอเปลี่ยนบิลเงินสดเป็นเครดิตหลังจากผ่านไป 3 วัน ต้องทำอย่างไร?", a: "ทำใบลดหนี้ (CN) เพื่อล้างบิลเก่าและออกบิลใหม่", options: ["ฉีกบิลเก่าทิ้งออกใบใหม่เลขเดิม", "ทำใบลดหนี้ (CN) เพื่อล้างบิลเก่าและออกบิลใหม่", "ขีดฆ่าคำว่าเงินสดเขียนเครดิตแทน", "ไม่สามารถเปลี่ยนได้"] },
            { id: 6, q: "สลิปโอนเงินที่ชื่อไม่ตรงกับลูกค้าในบิล ต้องจัดการอย่างไร?", a: "ระบุชื่อผู้โอนในหมายเหตุบิลหรือรายงานขาย", options: ["รับเงินปกติไม่ต้องทำอะไร", "ระบุชื่อผู้โอนในหมายเหตุบิลหรือรายงานขาย", "ปฏิเสธการโอนให้ลูกค้าโอนใหม่", "ยึดเงินนั้นไว้ก่อน"] },
            { id: 7, q: "ใบเสร็จ PC มูลค่า 2,000 บาทไม่มีชื่อบริษัท บัญชีควรทำอย่างไร?", a: "ปฏิเสธการเบิกจนกว่าจะได้ใบเสร็จที่ระบุชื่อบริษัทถูกต้อง", options: ["อนุโลมให้เบิกไปก่อน", "ปฏิเสธการเบิกจนกว่าจะได้ใบเสร็จที่ระบุชื่อบริษัทถูกต้อง", "เขียนชื่อบริษัทลงไปเอง", "ใช้ลิควิดลบแล้วพิมพ์ใหม่"] },
            { id: 8, q: "กรณีระบบล่มไม่สามารถพิมพ์รายงานปิดวันได้ ควรทำอย่างไร?", a: "ทำสรุปยอดด้วยลายมือและเซ็นรับมอบต่อหน้า", options: ["ไม่ต้องส่งเงินรอระบบใช้ได้", "ทำสรุปยอดด้วยลายมือและเซ็นรับมอบต่อหน้า", "ถ่ายรูปเงินส่งเข้า Line อย่างเดียว", "ฝากเงินไว้ที่ป้อมยาม"] },
            { id: 9, q: "จ่ายค่าบริการ 1,000 บาท ต้องหัก ณ ที่จ่าย 3% จะต้องจ่ายเงินสดจริงเท่าไหร่?", a: "970 บาท", options: ["1,000 บาท", "970 บาท", "1,030 บาท", "300 บาท"] },
            { id: 10, q: "บิลขายลงราคาผิดและส่งให้ลูกค้าไปแล้ว วิธีแก้ไขที่ปลอดภัยที่สุดคือ?", a: "ติดต่อลูกค้าขอคืนบิลเก่าเพื่อ VOID และออกใบใหม่", options: ["บวกเพิ่มในรอบหน้า", "ติดต่อลูกค้าขอคืนบิลเก่าเพื่อ VOID และออกใบใหม่", "แก้ในโปรแกรมโดยไม่บอกลูกค้า", "ปล่อยผ่านไป"] },
            { id: 11, q: "หน้าที่หลักของพนักงานการเงิน (ฝั่งจ่าย) คืออะไร?", a: "คุมสดย่อย 20,000 บาท และคุมเอกสารการจ่าย", options: ["หาลูกค้าใหม่", "ผลิตสินค้า", "คุมสดย่อย 20,000 บาท และคุมเอกสารการจ่าย", "ขับรถส่งของ"] },
            { id: 12, q: "การนับเงินในเก๊ะสดย่อยควรทำบ่อยแค่ไหน?", a: "ทุกครั้งที่เปลี่ยนกะ หรือทุกเย็นก่อนเลิกงาน", options: ["ทุกสิ้นเดือน", "ทุกครั้งที่เปลี่ยนกะ หรือทุกเย็นก่อนเลิกงาน", "อาทิตย์ละครั้ง", "ปีละครั้ง"] },
            { id: 13, q: "บิลเก็บเงินลูกค้าที่ไม่มีลายเซ็นผู้รับของ มีผลเสียอย่างไร?", a: "ไม่สามารถใช้เป็นหลักฐานเรียกเก็บเงินตามกฎหมายได้", options: ["ไม่มีผลเสีย", "ไม่สามารถใช้เป็นหลักฐานเรียกเก็บเงินตามกฎหมายได้", "ทำให้บิลดูไม่สวย", "ทำให้พนักงานขับรถโดนด่าอย่างเดียว"] },
            { id: 14, q: "เบิกเงินซื้อของ 15,000 บาท (เกินวงเงินสดย่อยต่อครั้ง) ควรทำอย่างไร?", a: "ปฏิเสธจ่ายเงินสดและให้ใช้ระบบโอนเงินบริษัทแทน", options: ["แบ่งจ่ายใบยืม 3 ใบ", "ปฏิเสธจ่ายเงินสดและให้ใช้ระบบโอนเงินบริษัทแทน", "ให้พนักงานสำรองจ่ายไปก่อน", "จ่ายเงินสดไปเลย"] },
            { id: 15, q: "ยอดโอนในโปรแกรม 5,500 แต่สลิปใน Line มี 5,000 ต้องทำอย่างไร?", a: "หาสาเหตุรายการที่หายไปและตามสลิปให้ครบ", options: ["หาสาเหตุรายการที่หายไปและตามสลิปให้ครบ", "ลบรายการ 500 ทิ้ง", "ขอเงินสดพนักงานขายมาเติม", "เฉยไว้"] },
            { id: 16, q: "ใครมีสิทธิถอนเงินจาก 'ขารับ' ไปจ่ายค่าน้ำมันโดยตรง?", a: "ไม่มีใครมีสิทธิ ต้องนำส่งยอดเต็มห้ามหักจ่าย", options: ["พนักงานขับรถ", "ไม่มีใครมีสิทธิ ต้องนำส่งยอดเต็มห้ามหักจ่าย", "พนักงานบัญชี", "เจ้าของบริษัท"] },
            { id: 17, q: "ใบยืมเงิน AV ค้างนานเกิน 1 สัปดาห์ควรทำอย่างไร?", a: "ทำใบทวงถามและแจ้งเตือนพนักงานให้เคลียร์ทันที", options: ["เฉยไว้", "ทำใบทวงถามและแจ้งเตือนพนักงานให้เคลียร์ทันที", "หักเงินเดือนทันที", "ริบเงินประกัน"] },
            { id: 18, q: "ใบเสร็จมีรอยลบด้วยลิควิดตรงยอดเงิน บัญชีควรทำอย่างไร?", a: "ปฏิเสธไม่รับและให้พนักงานไปขอใบใหม่ที่ไม่มีรอยแก้ไข", options: ["รับไว้ได้ถ้าเซ็นกำกับ", "ปฏิเสธไม่รับและให้พนักงานไปขอใบใหม่ที่ไม่มีรอยแก้ไข", "ใช้ปากกาเขียนทับ", "แปะเทปกาวทับ"] },
            { id: 19, q: "แฟ้มสีใดที่ใช้สำหรับงาน 'ประสานงานขาย' (หน้าบ้าน)?", a: "น้ำเงิน/เขียว", options: ["แดง/เหลือง", "น้ำเงิน/เขียว", "ขาว/ใส", "ดำ"] },
            { id: 20, q: "แฟ้มสีใดที่ใช้สำหรับงาน 'การเงิน/บัญชี' (หลังบ้าน)?", a: "แดง/เหลือง", options: ["แดง/เหลือง", "น้ำเงิน/เขียว", "ชมพู", "ม่วง"] },
            { id: 21, q: "การส่งมอบเงินขารับต้องจัดลำดับเอกสารอย่างไร (บนลงล่าง)?", a: "รายงานสรุป > ใบนำส่ง > สลิปโอน > สำเนาบิล", options: ["สำเนาบิล > สลิปโอน > ใบนำส่ง", "รายงานสรุป > ใบนำส่ง > สลิปโอน > สำเนาบิล", "สลิปโอน > บิลขาย > รายงาน", "เรียงตามเลขที่บิลอย่างเดียว"] },
            { id: 22, q: "หากเจ้าของบริษัทขอหยิบเงินสดจากเก๊ะ 2,000 บาท พนักงานควรทำอย่างไร?", a: "ให้เซ็นชื่อในใบรับเงินชั่วคราวหรือสมุดรับ-ส่งเงินภายใน", options: ["ให้ไปเลยไม่ต้องจด", "ให้เซ็นชื่อในใบรับเงินชั่วคราวหรือสมุดรับ-ส่งเงินภายใน", "แอบหยิบเงินตัวเองใส่แทน", "โทรเรียกตำรวจ"] },
            { id: 23, q: "ทำไมใบเสนอราคา (QT) ต้องระบุวันสิ้นสุดราคา?", a: "เพื่อป้องกันความเสี่ยงจากราคาวัตถุดิบที่ผันผวน", options: ["เพื่อกดดันลูกค้า", "เพื่อป้องกันความเสี่ยงจากราคาวัตถุดิบที่ผันผวน", "เพื่อให้บิลดูดี", "เป็นกฎหมายบังคับ"] },
            { id: 24, q: "พบพนักงานใช้รหัสผ่านเพื่อนเข้าโปรแกรมขาย ควรทำอย่างไร?", a: "ตักเตือนและรายงานทันทีเพราะทำลายระบบตรวจสอบตัวตน", options: ["เฉยไว้", "ตักเตือนและรายงานทันทีเพราะทำลายระบบตรวจสอบตัวตน", "ให้ใช้ต่อไป", "เปลี่ยนรหัสผ่านให้เพื่อนแทน"] },
            { id: 25, q: "Variance ในตารางต้นทุนติดลบมากผิดปกติ หมายความว่า?", a: "มีการสูญเสียในกระบวนการผลิตหรือวัตถุดิบหายเกินมาตรฐาน", options: ["กำไรมากขึ้น", "มีการสูญเสียในกระบวนการผลิตหรือวัตถุดิบหายเกินมาตรฐาน", "ทำงานเร็วเกินไป", "ไม่มีความหมาย"] },
            { id: 26, q: "ใบสำคัญรับ (RV) ใช้ในกรณีใดตาม SOP ของบริษัท?", a: "เมื่อได้รับเงินสดคืนจากพนักงานหรือรายได้จิปาถะ", options: ["เมื่อจ่ายค่าน้ำมัน", "เมื่อได้รับเงินสดคืนจากพนักงานหรือรายได้จิปาถะ", "เมื่อสั่งซื้อแป้ง", "เมื่อออกบิลเครดิต"] },
            { id: 27, q: "การจัดการ 'เงินสำรองทอน' (Floating Money) ต้องแยกออกจากเงินขารับอย่างไร?", a: "ต้องแยกกระเป๋าและห้ามนำยอดขายมาปนกับเงินทอน", options: ["รวมกันได้เลยในลิ้นชักเดียว", "ต้องแยกกระเป๋าและห้ามนำยอดขายมาปนกับเงินทอน", "ให้พนักงานควักเงินตัวเองมาทอนก่อน", "ไม่ต้องมีเงินทอน"] },
            { id: 28, q: "ลูกค้าโอนเงินเกินมา 100 บาทและขอเงินสดทอนคืน คุณควรทำอย่างไร?", a: "ให้ลูกค้าเขียนใบคำร้องและบริษัทโอนกลับผ่านบัญชีเท่านั้น", options: ["ทอนเงินสดในเก๊ะไปเลย", "ให้ลูกค้าเขียนใบคำร้องและบริษัทโอนกลับผ่านบัญชีเท่านั้น", "แถมสินค้าให้ครบ 100 บาท", "ยึดเงินเข้าบริษัททันที"] },
            { id: 29, q: "ทำไมต้องระบุ 'เวลาโอน' ในรายงานการสรุปยอดสลิป?", a: "เพื่อให้บัญชีตรวจสอบยอดใน Statement ได้แม่นยำขึ้น", options: ["เพื่อความสวยงาม", "เพื่อให้บัญชีตรวจสอบยอดใน Statement ได้แม่นยำขึ้น", "เพื่อดูพฤติกรรมลูกค้า", "เป็นกฎหมายสากล"] },
            { id: 30, q: "เป้าหมายสูงสุดของการปฏิบัติตาม SOP การเงินทั้งหมดคืออะไร?", a: "เพื่อความถูกต้อง โปร่งใส และลดความเสี่ยงทุจริต", options: ["เพื่อให้บริษัทดูทันสมัย", "เพื่อความถูกต้อง โปร่งใส และลดความเสี่ยงทุจริต", "เพื่อให้พนักงานทำงานยากขึ้น", "เพื่อประหยัดกระดาษ"] }
        ];

        const shuffle = (arr) => {
            const newArr = [...arr];
            for (let i = newArr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
            }
            return newArr;
        };

        const App = () => {
            const [screen, setScreen] = useState('landing');
            const [user, setUser] = useState({ name: '', surname: '' });
            const [currentIdx, setCurrentIdx] = useState(0);
            const [answers, setAnswers] = useState({});
            const [timeLeft, setTimeLeft] = useState(1200);
            const [score, setScore] = useState(0);
            const [shuffledQuestions, setShuffledQuestions] = useState([]);

            useEffect(() => {
                let timer;
                if (screen === 'quiz' && timeLeft > 0) {
                    timer = setInterval(() => setTimeLeft(p => p - 1), 1000);
                } else if (timeLeft === 0 && screen === 'quiz') {
                    handleFinish();
                }
                return () => clearInterval(timer);
            }, [screen, timeLeft]);

            const formatTime = (s) => {
                const m = Math.floor(s / 60);
                const sec = s % 60;
                return `${m}:${sec < 10 ? '0' : ''}${sec}`;
            };

            const handleStart = () => {
                if (user.name && user.surname) {
                    const prepared = MASTER_QUESTIONS.map(q => ({
                        ...q,
                        shuffledOptions: shuffle(q.options)
                    }));
                    setShuffledQuestions(prepared);
                    setScreen('quiz');
                }
            };

            const handleFinish = useCallback(() => {
                let s = 0;
                shuffledQuestions.forEach((q, i) => { if (answers[i] === q.a) s++; });
                setScore(s);
                setScreen('result');
            }, [answers, shuffledQuestions]);

            const getGrade = (pts) => {
                if (pts >= 28) return { label: 'ดีเยี่ยม (Expert)', color: 'text-emerald-600', bg: 'bg-emerald-50', desc: 'มีความเชี่ยวชาญสูงสุด พร้อมปฏิบัติงานอิสระ' };
                if (pts >= 25) return { label: 'ดี (Advanced)', color: 'text-blue-600', bg: 'bg-blue-50', desc: 'ผ่านเกณฑ์มาตรฐานบริษัท เข้าใจระบบงานเป็นอย่างดี' };
                return { label: 'ควรปรับปรุง (Fail)', color: 'text-rose-600', bg: 'bg-rose-50', desc: 'คะแนนต่ำกว่าเกณฑ์มาตรฐาน (25 ข้อ) ต้องศึกษา SOP ใหม่' };
            };

            if (screen === 'landing') {
                return (
                    <div className="min-h-screen flex items-center justify-center p-4">
                        <div className="max-w-2xl w-full bg-white rounded-[2rem] shadow-2xl overflow-hidden border border-slate-100">
                            <div className="bg-indigo-600 p-10 text-white text-center">
                                <div className="flex justify-center mb-4"><Icons.ClipboardCheck /></div>
                                <h1 className="text-3xl font-extrabold uppercase tracking-widest leading-tight">SOP Finance Exam</h1>
                                <p className="opacity-90 mt-2 text-lg font-light">แบบทดสอบมาตรฐานการปฏิบัติงาน (30 ข้อ)</p>
                            </div>
                            <div className="p-8 grid md:grid-cols-2 gap-10">
                                <div className="space-y-6">
                                    <h2 className="text-xl font-bold text-slate-800 flex items-center gap-2 text-left"><Icons.User /> ข้อมูลผู้เข้าสอบ</h2>
                                    <div className="space-y-4 text-left">
                                        <div>
                                            <label className="block text-sm font-bold text-slate-600 mb-2">ชื่อจริง</label>
                                            <input type="text" placeholder="ระบุชื่อจริง" className="w-full px-5 py-4 border-2 border-slate-100 rounded-2xl focus:border-indigo-500 outline-none transition-all text-lg font-kanit" value={user.name} onChange={e => setUser({...user, name: e.target.value})} />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-bold text-slate-600 mb-2">นามสกุล</label>
                                            <input type="text" placeholder="ระบุนามสกุล" className="w-full px-5 py-4 border-2 border-slate-100 rounded-2xl focus:border-indigo-500 outline-none transition-all text-lg font-kanit" value={user.surname} onChange={e => setUser({...user, surname: e.target.value})} />
                                        </div>
                                    </div>
                                </div>
                                <div className="space-y-5 text-left text-slate-700">
                                    <h2 className="text-xl font-bold flex items-center gap-2"><Icons.Award /> เกณฑ์ประเมิน</h2>
                                    <ul className="space-y-2 text-sm">
                                        <li className="flex justify-between"><span>จำนวนข้อสอบ:</span> <span className="font-bold">30 ข้อ</span></li>
                                        <li className="flex justify-between"><span>เวลาที่ให้:</span> <span className="font-bold">20 นาที</span></li>
                                        <li className="flex justify-between p-2 bg-indigo-50 rounded-lg text-indigo-700"><span>เกณฑ์การผ่าน:</span> <span className="font-bold">25 ข้อขึ้นไป</span></li>
                                    </ul>
                                </div>
                            </div>
                            <div className="px-10 pb-10">
                                <button onClick={handleStart} disabled={!user.name || !user.surname} className={`w-full py-5 rounded-[2rem] font-bold text-xl text-white shadow-2xl transition-all flex items-center justify-center gap-3 ${user.name && user.surname ? 'bg-indigo-600 hover:bg-indigo-700 active:scale-95' : 'bg-slate-300 cursor-not-allowed'}`}>เริ่มทำข้อสอบ</button>
                            </div>
                        </div>
                    </div>
                );
            }

            if (screen === 'quiz') {
                const q = shuffledQuestions[currentIdx];
                const progress = (Object.keys(answers).length / 30) * 100;
                return (
                    <div className="min-h-screen bg-slate-50 p-4 md:p-8 text-slate-800">
                        <div className="max-w-4xl mx-auto text-center">
                            <div className="flex justify-between items-center mb-6">
                                <div className="flex items-center gap-4 bg-white px-6 py-3 rounded-[2rem] shadow-sm border border-slate-100">
                                    <div className="text-indigo-600 font-bold"><Icons.Timer /></div>
                                    <span className="text-2xl font-black text-indigo-600">{formatTime(timeLeft)}</span>
                                </div>
                                <div className="text-right">
                                    <p className="text-xl font-bold text-slate-800">{user.name} {user.surname}</p>
                                </div>
                            </div>
                            <div className="w-full bg-slate-200 h-3 rounded-full mb-10 overflow-hidden shadow-inner">
                                <div className="bg-indigo-600 h-full transition-all duration-700" style={{ width: `${progress}%` }}></div>
                            </div>
                            <div className="bg-white rounded-[3rem] shadow-2xl p-10 md:p-16 border border-slate-50 min-h-[500px] flex flex-col relative text-left">
                                <span className="bg-indigo-600 text-white px-5 py-2 rounded-full text-xs font-black uppercase mb-6 self-start tracking-widest shadow-md shadow-indigo-100">Question {currentIdx + 1} of 30</span>
                                <h2 className="text-2xl md:text-3xl font-bold text-slate-800 leading-[1.5] mb-12">{q.q}</h2>
                                <div className="grid grid-cols-1 gap-5 flex-grow">
                                    {q.shuffledOptions.map((opt, i) => (
                                        <button key={i} onClick={() => setAnswers({...answers, [currentIdx]: opt})}
                                            className={`text-left p-6 rounded-[2.5rem] border-2 transition-all flex items-center gap-6 group ${answers[currentIdx] === opt ? 'border-indigo-600 bg-indigo-50 shadow-lg' : 'border-slate-100 bg-white hover:border-indigo-200'}`}
                                        >
                                            <div className={`w-8 h-8 rounded-full border-2 flex-shrink-0 flex items-center justify-center transition-all ${answers[currentIdx] === opt ? 'border-indigo-600 bg-indigo-600' : 'border-slate-300'}`}>
                                                {answers[currentIdx] === opt && <div className="w-3 h-3 bg-white rounded-full animate-pulse"></div>}
                                            </div>
                                            <span className={`text-lg leading-relaxed ${answers[currentIdx] === opt ? 'text-indigo-900 font-bold' : 'text-slate-600'}`}>{opt}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                            <div className="flex justify-between mt-10">
                                <button onClick={() => setCurrentIdx(c => c - 1)} disabled={currentIdx === 0} className="px-10 py-5 bg-white rounded-[2rem] font-bold shadow-md disabled:opacity-20 flex items-center gap-2 border border-slate-100"><Icons.ChevronLeft /> ย้อนกลับ</button>
                                {currentIdx === 29 ? 
                                    <button onClick={handleFinish} className="px-14 py-5 bg-rose-600 text-white rounded-[2rem] font-black shadow-2xl">ส่งข้อสอบ</button> :
                                    <button onClick={() => setCurrentIdx(c => c + 1)} className="px-14 py-5 bg-indigo-600 text-white rounded-[2rem] font-black shadow-2xl flex items-center gap-3">ถัดไป <Icons.ChevronRight /></button>
                                }
                            </div>
                        </div>
                    </div>
                );
            }

            if (screen === 'result') {
                const grade = getGrade(score);
                const isPassed = score >= 25;
                return (
                    <div className="min-h-screen bg-slate-100 flex items-center justify-center p-4">
                        <div className="max-w-3xl w-full bg-white rounded-[4rem] shadow-2xl overflow-hidden print:shadow-none border border-slate-100 text-center">
                            <div className="bg-slate-900 p-14 text-white">
                                <h1 className="text-xs opacity-40 font-black tracking-[0.4em] mb-4 uppercase">Certificate of Assessment</h1>
                                <h2 className="text-5xl font-black">{user.name} {user.surname}</h2>
                            </div>
                            <div className="p-14 space-y-12">
                                <div className="flex flex-col md:flex-row items-center justify-center gap-16">
                                    <div className={`relative w-48 h-48 flex items-center justify-center bg-white rounded-full border-[12px] shadow-2xl ${isPassed ? 'border-indigo-600' : 'border-rose-500'}`}>
                                        <div className="text-center">
                                            <p className="text-6xl font-black text-slate-800">{score}</p>
                                            <p className="text-[10px] text-slate-400 font-black uppercase">Score / 30</p>
                                        </div>
                                    </div>
                                    <div className="text-center md:text-left space-y-4 max-w-sm">
                                        <h3 className={`text-5xl font-black leading-none ${grade.color}`}>{grade.label}</h3>
                                        <div className={`${grade.bg} px-6 py-4 rounded-[2rem] border border-current opacity-80`}>
                                            <p className={`text-lg font-bold ${grade.color}`}>{grade.desc}</p>
                                        </div>
                                    </div>
                                </div>
                                <div className="bg-slate-50 p-8 rounded-[3rem] border border-slate-200 grid grid-cols-2 gap-8 text-left">
                                    <div>
                                        <p className="text-[10px] text-slate-400 font-black uppercase tracking-widest">สถานะประเมิน</p>
                                        <p className={`text-2xl font-black ${isPassed ? 'text-emerald-600' : 'text-rose-600'}`}>{isPassed ? '✓ ผ่านเกณฑ์' : '✗ ไม่ผ่านเกณฑ์'}</p>
                                    </div>
                                    <div>
                                        <p className="text-[10px] text-slate-400 font-black uppercase tracking-widest">เวลาที่ใช้ไป</p>
                                        <p className="text-2xl font-black text-slate-800">{formatTime(1200 - timeLeft)} นาที</p>
                                    </div>
                                </div>
                                <div className="flex flex-col sm:flex-row gap-5 no-print pt-6">
                                    <button onClick={() => window.print()} className="flex-1 py-6 bg-slate-800 text-white rounded-[2.5rem] font-black text-xl flex items-center justify-center gap-4 shadow-2xl transition-all hover:bg-slate-900 active:scale-95"><Icons.Printer /> บันทึก PDF</button>
                                    <button onClick={() => window.location.href=`mailto:?subject=Exam Result&body=Score: ${score}/30`} className="flex-1 py-6 bg-indigo-600 text-white rounded-[2.5rem] font-black text-xl flex items-center justify-center gap-4 shadow-2xl hover:bg-indigo-700 transition-all active:scale-95 shadow-indigo-100"><Icons.Send /> ส่งเมลรายงาน</button>
                                </div>
                                <button onClick={() => window.location.reload()} className="w-full py-5 text-slate-300 font-black text-sm no-print hover:text-indigo-600 transition-colors uppercase tracking-widest font-kanit">Retake Assessment</button>
                            </div>
                        </div>
                    </div>
                );
            }
            return null;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
```
